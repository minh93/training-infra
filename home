# STEP1:仮想化
## 目的
* Unix系のOSに慣れる
* 各種ディストリビューションのインストーラーに慣れる
* 仮想化環境に慣れる
* 代表的な仮想化Citrix Xenserver 6.5.0 インストールする

## 出来たこと
仮想化`Citrix Xenserver 6.5.0` インストールしました。
仮想機を「追加、削除」出来ました。
OSインストールしました。

## 問題-解決方法

# STEP2:DNS/Mail/ネットワーク
## 目的
1. DNSサーバ構築、イントラネット内での名前解決の実現
2. postfixを利用してメールサーバ構築、SMTP等への知識を深める
3. iptables利用して簡易的なソフトウェアFirewall
## 出来たこと
1. DNSサーバ構築ため
* bind9を利用しました。
``` text
#debian distribute
$ sudo apt-get install bind9
```
* reverse zoneとforward zone 設定

ディレクトリ /etc/bind9
``` text
#zone file
zone "demo.xyz" {
  type master;
  file "/etc/bind/forward.demo";
};
zone "13.168.192.in-addr.arpa" {
  type master;
  file "/etc/bind/reverse.demo";
};
```
*forward*
``` text
forward.zone.file:
;
; BIND data file for demo.xyz interface
;
$TTL    604800
@       IN      SOA      sid.demo.xyz. root.demo.xyz. (
                              2         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL
        IN      A       192.168.13.50
;
@       IN      NS      sid.demo.xyz.
sid     IN      A       192.168.13.50
www     IN      CNAME   sid
mail    IN      A       192.168.13.52
redmine IN      CNAME   sid
```
*reverse*
``` text
;
; BIND reverse data file for 192.168.13. interface
;
$TTL    604800
@       IN      SOA     sid.demo.xyz. root.demo.xyz.(
                              1         ; Serial
                         604800         ; Refresh
                          86400         ; Retry
                        2419200         ; Expire
                         604800 )       ; Negative Cache TTL

;
@       IN      NS      sid.demo.xyz.

50      IN      PTR     sid.demo.xyz.
52      IN      PTR     mail.demo.xyz.
```
## 問題-解決方法

コマンド
テーストのためこの以下
```text
$ service bind9 [start/stop/restart]
$ dig @localhost [domain name]　DNSサーバーに対し問い合わせを行い、その応答結果を表示するコマンドです。
$ nslookup [domain name] DNSサービスのトラブルシューティングの場合に必ずといってよいほど使われる、非常に基本的なコマンドである。
```
2. Postfix
postfixサビースをインストール
``` text
$ apt-get install postfix
```
postfix設定したファイル　*/etc/postfix/main.cf*
3. dovecotとウェブメールSquirrel
*dovecot*
``` text
$ apt-get install dovecot
```
dovecot設定
*/etc/dovecot/dovecot.conf*
``` text
protocols = imap pop3
```
*/etc/dovecot/conf.d/10-mail.conf*
``` text
# メールディレクトリ
mail_location = mbox:~/mail:INBOX=/var/mail/%u
```
*Squirrel*
``` text
# Apache2 ウェブサーバ
$ apt-get install apache2
```
Apache設定
``` xml
ServerAdmin webmaster@demo.xyz
ServerName mail.demo.xyz
DocumentRoot /var/www/mail.demo.xyz/squirrelmail
```
ディレクトリ作成
``` xml
# web mail folder
$ mkdir /var/www/mail.demo.xyz
# 相対ディレクトリ
$ ln -s /usr/share/squirrelmail /var/www/mail.demo.xyz/squirrelmail
```
apacheサービスを再起動
他の設定ファイル 
[squirrelとapache](link)
3. iptable
``` text
# インストール
$ apt-get install iptable-persistence
```
*設定ファイル /etc/iptables/rules.v4[6]*
[設定ファイル]()
*デバッグコマンド*
``` text
$ telnet [address] [port]
```
普段のポート
| サービス      | ポート        |
| ------------- |:-------------:| 
| ssh           | 22            | 
| http          | 80~85         | 
| dns           | 53            |

# STEP3: アプリケーション
## 目的
* LAMPandR （`Linux` / `Apache` / `MySQL` / `PHP`/`Ruby`）な環境を構築し、各種ツールについての理解を深める
* 代表的なアプリケーションサーバーをセットアップしてインターネットへ公開する
* Linux の標準的なテキストエディタの使い方を習得する

## 出来たこと
* Apacheウェブサーバをインストール
* MySQLインストール
``` text
# SQLサーバにログイン
$ mysql -u[user] -h[host] -p
```
* RVMとRubyインストール
  * インストール 
    ``` text
    #RVM インストール
    $ \curl -L https://get.rvm.io | bash -s stable --rails
    # 次は
    $ source ~/.rvm/scripts/rvm
    # RVMの情報チェック
    $ rvm info
    ```
  * `RVM`は`Ruby`バーションを管理します。
    ``` text
    # 他のルビバーションをインストール
    $ rvm install version_of_ruby
    #　ルビバーションを指定
    $ rvm user version_of_ruby
    ```
* Redmineインストール
  * ソースコードをダウンロードして[こちら](http://www.redmine.org/projects/redmine/wiki/Download)
  * 前のSQLサーバを使って
    ``` sql
    # redmineユーザを作成
    CREATE DATABASE redmine CHARACTER SET utf8;
    CREATE USER 'redmine'@'localhost' IDENTIFIED BY '[my_password]';
    GRANT ALL PRIVILEGES ON redmine.* TO 'redmine'@'localhost';
    ```
  * 




























